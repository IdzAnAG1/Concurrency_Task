# Concurrency Task

 **Concurrency Task** — это учебный проект на Go, демонстрирующий архитектуру для отслеживания, подготовки и запуска задач в многопоточном окружении. Проект построен с использованием горутин, каналов и паттернов проектирования, чтобы отработать навыки написания масштабируемого и безопасного кода.

---

## Описание

Приложение мониторит указанную директорию с реализациями задач, отслеживает изменения файлов и автоматически подготавливает их к запуску. Если структура задачи неполная, проект автоматически создаёт шаблон с `struct`, методом `Launch` и функцией `init`, чтобы зарегистрировать задачу для выполнения.

Основные возможности:

*  **Автоматический детект новых и изменённых файлов**.
*  **Генерация кода (scaffolding)** для неполных задач.
*  **Потокобезопасное хранилище задач** с использованием `sync.Mutex`.
*  **Поддержка модульной архитектуры** для удобного расширения.
*  **Юнит-тесты** для ключевых компонентов.

---

##  Архитектура проекта

```
.
├── cmd
│   └── Concurrency_Task
│           └── main.go
├── go.mod
├── go.sum
├── internal
│   ├── channels
│   │       └── channels.go
│   ├── config
│   │       └── config.go
│   ├── file_verifier
│   │       ├── change_detector
│   │       │  └── ChaD.go
│   │       ├── errors_handler
│   │       │  └── ErrorsHandler.go
│   │       ├── file_readiness_detector
│   │       │  └── FiReD.go
│   │       ├── injection_of_function_init
│   │       │  └── InFinit.go
│   │       └── Verifier.go
│   ├── interruptor
│   │       └── interruptor.go
│   ├── logger
│   │       └── logger.go
│   ├── models
│   │       └── models.go
│   ├── tasks
│   │    ├── interface.go
│   │    ├── task_code_storage
│   │    │  ├── TaskCode.go
│   │    │  ├── TaskCode_test.go
│   │    │  └── Test_NonEmptyFolder
│   │    │           └── testfile.go
│   │    ├── task_impl
│   │    │        └── task_1.go
│   │    └── task_storage
│   │          ├── taskStorage.go
│   │          └── taskStorage_test.go
│   ├── utils
│   │    ├── file_handler
│   │    │       ├── file_handler.go
│   │    │       └── file_handler_test.go
│   │    ├── go_uuid
│   │    │       └── uuid.go
│   │    ├── hash
│   │    │       └── hash.go
│   │    └── regex
│   │          ├── regexp.go
│   │          └── regexp_test.go
│   └── variables
│           └── variables.go
├── Makefile
└── README.md

```

---

## Технологии

* **Go** (goroutines, channels, sync primitives)
* **Uber Zap** — структурированное логирование
* **Make** — автоматизация сборки
* **Юнит-тестирование** (встроенный пакет `testing`)

---

##  Как запустить

1. **Склонировать репозиторий**

   ```bash
   git clone https://github.com/yourusername/concurrency_task.git
   cd concurrency_task
   ```

2. **Собрать и запустить**

   ```bash
   go build -o Concurrency_Task ./cmd/Concurrency_Task
   ./Concurrency_Task
   ```

3. По умолчанию приложение будет отслеживать директорию `internal/tasks/task_impl` каждые 250 мс.

---

##  Конфигурация

Настройки задаются через структуру `Config`:

| Параметр                 | Описание                                        |
| ------------------------ | ----------------------------------------------- |
| `PathToMethodsDirectory` | Путь к директории с реализациями задач          |
| `Interval`               | Интервал проверки изменений (в `time.Duration`) |

В будущем конфиг может быть вынесен в YAML/JSON файл.

---

##  Тесты

Для запуска тестов выполните:

```bash
go test -v ./...
```

Проект покрыт юнит-тестами для ключевых компонентов:

* `task_code_storage` — безопасное добавление, получение и удаление кода задач.
* `file_handler` — работа с файловой системой.
* Проверка корректной генерации init-функций.

---

##  Цель проекта

Этот проект создан **исключительно в учебных целях** и демонстрирует:

* Принципы работы с конкурентностью в Go.
* Построение масштабируемой архитектуры.
* Использование структурированного логирования и безопасного хранилища данных.
* Динамическую генерацию кода и автоматическую регистрацию задач.

---